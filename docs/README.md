# PostSail documentation

The documentation of `xbgmsharp/postgsail` is available at <https://docs.openplotter.cloud>.

To build/develop this documentation locally, you can install `mdbook` and `mdbook-mermaid`.

```bash
cargo install mdbook mdbook-alerts mdbook-mermaid mdbook-toc mdbook-katex mdbook-linkcheck
```

To generate the documentation
```bash
mdbook build
```

To develop the documentation
```bash
mdbook serve
```

The database documentation is generated by tbls, https://github.com/k1LoW/tbls
```bash
tbls doc --rm-dist -c ../.tbls.yml --sort
```

To lint the database using tbls
```bash
tbls lint -c ../.tbls.yml --sort
```

To lint the database using schemalint
```bash
npx schemalint -c ../.schemalintrc.js
```

## Development

You can simply edit the markdown files in the `src` directory and run the following command (from the project root directory) to preview the changes:

```bash
mdbook watch --open docs
```

Next to showing you how the docs will look, this also runs a link checker to ensure that all links are valid.

> [!TIP]
> Make sure that all pages are linked from [`src/SUMMARY.md`](src/SUMMARY.md).
> **Only** pages linked will be rendered.
> See the [mdbook documentation](https://rust-lang.github.io/mdBook/) for more information.

> [!NOTE]
> Files may only be added, not renamed.
> If you want to rename a file, make sure to [add a redirect to the new file in `output.html.redirect`](https://rust-lang.github.io/mdBook/format/configuration/renderers.html#outputhtmlredirect).
> Renaming files would otherwise break existing, external links for example on stackoverflow or github-discussions.
>
> Removing is bad for the same reasons and will be handled on a case-by-case basis.


```
% docker compose  -f docker-compose.yml -f docker-compose.dev.yml run --rm --entrypoint 'bash /docs/run.sh' docs
```